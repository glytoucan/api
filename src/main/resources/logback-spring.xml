<?xml version="1.0" encoding="UTF-8"?>
<configuration>
	<include resource="org/springframework/boot/logging/logback/base.xml" />

	<logger name="org.glytoucan" level="DEBUG" />
	<logger name="org.glycoinfo" level="DEBUG" />

	<appender name="GMAIL" class="ch.qos.logback.classic.net.SMTPAppender">
		<smtpHost>smtp.gmail.com</smtpHost>
		<smtpPort>587</smtpPort>
		<STARTTLS>true</STARTTLS>
		<username>glytoucan@gmail.com</username>
		<password>${LOG_EMAIL_PASSWORD}</password>

		<to>support@glytoucan.org</to>
		<to>aokinobu@gmail.com</to> <!-- additional destinations are possible -->
		<from>glytoucan@gmail.com</from>
		<subject>error log: %logger{20} - %m</subject>
		<layout class="ch.qos.logback.classic.PatternLayout">
			<pattern>%date %-5level %logger - %message%n</pattern>
		</layout>
		<asynchronousSending>false</asynchronousSending>
	</appender>


	<appender name="EMAIL" class="ch.qos.logback.classic.net.SMTPAppender">
		<!-- <evaluator class="ch.qos.logback.classic.boolex.OnMarkerEvaluator"> -->
		<!-- <marker>NOTIFY_ADMIN</marker> -->
		<!-- </evaluator> -->
		<smtpHost>${LOG_EMAIL_HOST:-glytoucan.org}</smtpHost>
		<smtpPort>${LOG_EMAIL_PORT:-25}</smtpPort>
		<username>${LOG_EMAIL_USERNAME:-admin@glytoucan.org}</username>
		<password>${LOG_EMAIL_PASSWORD}</password>
		<from>admin@glytoucan.org</from>
		<to>admin@glytoucan.org</to>
		<subject>%logger{20} - %m</subject>
		<layout class="ch.qos.logback.classic.PatternLayout">
			<pattern>%date %-5level %logger - %message%n</pattern>
		</layout>
	    <asynchronousSending>false</asynchronousSending>
	</appender>

	<root level="ERROR">
		<appender-ref ref="EMAIL" />
	</root>
</configuration>